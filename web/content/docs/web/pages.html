<!DOCTYPE html>
<html>
	<head>
  <meta charset="utf-8">  
  <meta name="author" content="dadi.co">  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Welcome</title>
  <link rel="stylesheet" type="text/css" href="/css/main.css">
</head>

	<body>

	  <header class="c-header c-header--acollapsed">
  <div class="c-header__inner-wrapper u-cols">
    <div class="u-col u-col--1-1 u-col--2-3@medium">
      <a href="/">
        <img class="c-header__logo" src="/public/assets/img/dadi.png" alt="DADI">
      </a>

      <h2 class="c-header__title">Developer support</h2>
      <p class="c-header__subtitle">Tutorials and documentation</p>    
    </div>

    <div class="c-header__top u-col u-col--1-1 u-col--1-3@medium">
      <ul class="c-header__links">
        <li class="c-header__link">
          <a href="http://twitter.com/dadi">@DADI</a>
        </li>
        <li class="c-header__link">
          <a href="mailto:dev@dadi.tech">dev@dadi.tech</a>
        </li>
      </ul>

      
    </div>    

    
      <div class="u-col u-col--1-1">
        <div class="c-combo">
  <label class="c-combo__item c-combo__item--expand c-text-field-container">
    <span class="c-text-field__icon fa fa-search"></span>
    <input class="c-text-field" type="text" placeholder="Search our help centre…" />
  </label>
  <button class="c-combo__item c-button c-button--blue" type="submit">Search</button>
</div>
      </div>
    
  </div>
</header>

	  <h2 id="pages">Pages</h2>

<h3 id="overview">Overview</h3>

<ul>
  <li><a href="#page-specification">Page Specification</a></li>
  <li><a href="#basic-page-configuration">Basic Page Configuration</a></li>
  <li><a href="#advanced-page-configuration">Advanced Page Configuration</a></li>
  <li><a href="#configuration-properties">Configuration Properties</a></li>
  <li><a href="#routing">Routing</a></li>
  <li><a href="#datasources">Datasources</a></li>
  <li><a href="#required-datasources">Required Datasources</a></li>
  <li><a href="#events">Events</a></li>
  <li><a href="#preload-events">Preload Events</a></li>
  <li><a href="#caching">Caching</a></li>
  <li>Static Pages (TODO)</li>
  <li>Error Pages (TODO)</li>
</ul>

<h3 id="page-specification">Page Specification</h3>

<p>A <code class="highlighter-rouge">page</code> on your website consists of two files within your application’s file structure: a Page Specification and a Template.</p>

<p>Page Specifications exist as JSON files in your application’s <code class="highlighter-rouge">pages</code> folder. The location of this folder is configurable, but defaults to <code class="highlighter-rouge">app/pages</code>.</p>

<p>[TODO] DADI Web monitors the <code class="highlighter-rouge">app</code> folder for changes and will automatically reload pages and templates when these files change.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>my-web/
  app/
    datasources/      # datasource specifications
    events/           # event files
    pages/            # page specifications        
      people.dust     # page template file
      people.json     # page specification file
</code></pre>
</div>

<h4 id="basic-page-configuration">Basic Page Configuration</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="p">{</span>
  <span class="s2">"page"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"name"</span><span class="err">:</span> <span class="s2">"People"</span><span class="p">,</span>
    <span class="s2">"description"</span><span class="err">:</span> <span class="s2">"A page for displaying People records."</span><span class="p">,</span>
    <span class="s2">"language"</span><span class="err">:</span> <span class="s2">"en"</span>
  <span class="p">},</span>
  <span class="s2">"datasources"</span><span class="err">:</span> <span class="p">[</span> <span class="p">],</span>
  <span class="s2">"events"</span><span class="err">:</span> <span class="p">[</span> <span class="p">]</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="advanced-page-configuration">Advanced Page Configuration</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="p">{</span>
  <span class="s2">"page"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"name"</span><span class="err">:</span> <span class="s2">"People"</span><span class="p">,</span>
    <span class="s2">"description"</span><span class="err">:</span> <span class="s2">"A page for displaying People records."</span><span class="p">,</span>
    <span class="s2">"language"</span><span class="err">:</span> <span class="s2">"en"</span>
  <span class="p">},</span>
  <span class="s2">"settings"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"cache"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"beautify"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"keepWhitespace"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"passFilters"</span><span class="err">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="s2">"route"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"path"</span><span class="err">:</span> <span class="s2">"/people"</span>
  <span class="p">},</span>
  <span class="s2">"contentType"</span><span class="err">:</span> <span class="s2">"text/html"</span><span class="p">,</span>
  <span class="s2">"template"</span><span class="err">:</span> <span class="s2">"people.dust"</span><span class="p">,</span>
  <span class="s2">"datasources"</span><span class="err">:</span> <span class="p">[</span>
    <span class="s2">"allPeople"</span>
  <span class="p">],</span>
  <span class="s2">"requiredDatasources"</span><span class="err">:</span> <span class="p">[</span>
    <span class="s2">"allPeople"</span>
  <span class="p">],</span>
  <span class="s2">"events"</span><span class="err">:</span> <span class="p">[</span>
    <span class="s2">"processPeopleData"</span>
  <span class="p">]</span>  
  <span class="s2">"preloadEvents"</span><span class="err">:</span> <span class="p">[</span>
    <span class="s2">"geolocate"</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="configuration-properties">Configuration Properties</h4>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>Type</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>page</strong></td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>page.name</td>
      <td> </td>
      <td>String</td>
      <td> </td>
    </tr>
    <tr>
      <td>page.key</td>
      <td> </td>
      <td>String</td>
      <td> </td>
    </tr>
    <tr>
      <td>page.description</td>
      <td> </td>
      <td>String</td>
      <td> </td>
    </tr>
    <tr>
      <td><strong>settings</strong></td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>settings.cache</td>
      <td> </td>
      <td>Boolean</td>
      <td><code class="highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td>settings.beautify</td>
      <td> </td>
      <td>Boolean</td>
      <td><code class="highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td>settings.keepWhitespace</td>
      <td> </td>
      <td>Boolean</td>
      <td>If the global config has a setting for <code class="highlighter-rouge">dust.whitespace</code> that is used as the default, otherwise <code class="highlighter-rouge">true</code></td>
    </tr>
    <tr>
      <td>settings.passFilters</td>
      <td> </td>
      <td>Boolean</td>
      <td><code class="highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td><strong>route</strong></td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>paths</td>
      <td>An array of routes that this page will respond to</td>
      <td>Array</td>
      <td><code class="highlighter-rouge">[/pageName]</code></td>
    </tr>
    <tr>
      <td>constraint</td>
      <td>An optional function to execute to determine if the current URL matches this page</td>
      <td>String</td>
      <td> </td>
    </tr>
    <tr>
      <td>contentType</td>
      <td>The Content-Type of the page</td>
      <td>String</td>
      <td><code class="highlighter-rouge">"text/html"</code></td>
    </tr>
    <tr>
      <td>template</td>
      <td>The filename of the template to load for the page</td>
      <td>String</td>
      <td><code class="highlighter-rouge">pageName.dust</code></td>
    </tr>
    <tr>
      <td>datasources</td>
      <td>An array containing the datasources that should be loaded for the page</td>
      <td>Array</td>
      <td><code class="highlighter-rouge">[]</code></td>
    </tr>
    <tr>
      <td>requiredDatasources</td>
      <td>An array containing the datasources that must return data for the page to function. If any of the listed datasources return no results, a 404 is returned</td>
      <td>Array</td>
      <td><code class="highlighter-rouge">[]</code></td>
    </tr>
    <tr>
      <td>events</td>
      <td>An array containing the events that should be executed once all the page’s datasources have returned data</td>
      <td>Array</td>
      <td><code class="highlighter-rouge">[]</code></td>
    </tr>
    <tr>
      <td>preloadEvents</td>
      <td>An array containing the events that should be executed before the rest of the page’s datasources and events</td>
      <td>Array</td>
      <td><code class="highlighter-rouge">[]</code></td>
    </tr>
  </tbody>
</table>

<h3 id="routing">Routing</h3>

<p>A page’s default route is a value matching the page name. For example if the page name is <code class="highlighter-rouge">books</code> the page will be available in the browser at <code class="highlighter-rouge">/books</code>. The page specification’s route property becomes:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="s2">"route"</span><span class="err">:</span> <span class="p">{</span>
  <span class="s2">"paths"</span><span class="err">:</span> <span class="p">[</span><span class="s2">"/books"</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>
</div>

<p>For detailed documentation of routing, see <a href="https://github.com/dadi/web/blob/docs/docs/routing.md#page-routing">Routing</a>.</p>

<h3 id="templates">Templates</h3>

<p>Template files are stored in the same folder as the page specifications and have a <code class="highlighter-rouge">.dust</code> extension. Unless the page specification contains an explicit <code class="highlighter-rouge">template</code> property, the template name should match the page specification name.</p>

<p>See <a href="https://github.com/dadi/web/blob/docs/docs/views.md#page-templates">Views</a> for further documentation.</p>

<h3 id="data">Data</h3>

<p>[TODO]</p>

<h4 id="datasources">Datasources</h4>

<p>An array containing datasources that should be executed to load data for the page.</p>

<p>For detailed documentation of datasources, see <a href="https://github.com/dadi/web/blob/docs/docs/datasources.md">Datasources</a></p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="s2">"datasources"</span><span class="err">:</span> <span class="p">[</span>
  <span class="s2">"datasource-one"</span><span class="p">,</span>
  <span class="s2">"datasource-two"</span>
<span class="p">]</span>
</code></pre>
</div>

<h4 id="required-datasources">Required Datasources</h4>

<p>Allows specifying an array of datasources that must return data for the page to function.<br />
If any of the listed datasources return no results, a 404 is returned. The datasources specified<br />
must exist in the <code class="highlighter-rouge">datasources</code> array.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="s2">"requiredDatasources"</span><span class="err">:</span> <span class="p">[</span>
  <span class="s2">"datasource-one"</span>
<span class="p">]</span>
</code></pre>
</div>

<h4 id="events">Events</h4>

<p>An array containing events that should be executed after the page’s datasources have loaded data.</p>

<p>For detailed documentation of events, see <a href="https://github.com/dadi/web/blob/docs/docs/events.md">Events</a></p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="s2">"events"</span><span class="err">:</span> <span class="p">[</span>
  <span class="s2">"event-one"</span><span class="p">,</span>
  <span class="s2">"event-two"</span><span class="p">,</span>
<span class="p">]</span>
</code></pre>
</div>

<h4 id="preload-events">Preload Events</h4>

<p>An array containing events that should be executed before the rest of the page’s datasources and events.</p>

<p>Preload events are loaded from the filesystem in the same way as a page’s regular events,<br />
and a Javascript file with the same name must exist in the <code class="highlighter-rouge">events</code> path.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="s2">"preloadEvents"</span><span class="err">:</span> <span class="p">[</span>
  <span class="s2">"preloadevent-one"</span>
<span class="p">]</span>
</code></pre>
</div>

<h3 id="caching">Caching</h3>

<p>If true the output of the page will be cached using cache settings in the main configuration file.</p>

<p>For detailed documentation of page caching, see <a href="https://github.com/dadi/web/blob/docs/docs/caching.md#page-caching">Page Caching</a>.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="s2">"settings"</span><span class="err">:</span> <span class="p">{</span>
  <span class="s2">"cache"</span><span class="err">:</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre>
</div>


	  <footer class="c-footer">
  <div class="u-cols u-wrapper">
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Client engagement</h3>
      <p class="epsilon"><a href="mailto:makesomething@dadi.tech">makesomething@dadi.tech</a><br>
      +44 (0) 20 7205 2902</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Media enquiries</h3>
      <p class="epsilon"><a href="mailto:press@dadi.tech">press@dadi.tech</a><br>
      +44 (0) 20 7205 2901</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Careers</h3>
      <p class="epsilon"><a href="mailto:joinus@dadi.tech">joinus@dadi.tech</a><br>
      +44 (0) 20 7205 2903</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Everything else</h3>
      <p class="epsilon"><a href="mailto:hi@dadi.tech">hi@dadi.tech</a><br>
      +44 (0) 20 7205 2900<br>
      <a href="http://twitter.com/dadi">@dadi</a></p>
    </div>
  </div>

  <div class="u-wrapper u-padding">
    <img src="/public/assets/img/dadi-full.png" height="24">
  </div>
</footer>

	</body>
</html>