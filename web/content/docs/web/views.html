<!DOCTYPE html>
<html>
	<head>
  <meta charset="utf-8">  
  <meta name="author" content="dadi.co">  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Welcome</title>
  <link rel="stylesheet" type="text/css" href="/css/main.css">
</head>

	<body>

	  <header class="c-header c-header--acollapsed">
  <div class="c-header__inner-wrapper u-cols">
    <div class="u-col u-col--1-1 u-col--2-3@medium">
      <a href="/">
        <img class="c-header__logo" src="/public/assets/img/dadi.png" alt="DADI">
      </a>

      <h2 class="c-header__title">Developer support</h2>
      <p class="c-header__subtitle">Tutorials and documentation</p>    
    </div>

    <div class="c-header__top u-col u-col--1-1 u-col--1-3@medium">
      <ul class="c-header__links">
        <li class="c-header__link">
          <a href="http://twitter.com/dadi">@DADI</a>
        </li>
        <li class="c-header__link">
          <a href="mailto:dev@dadi.tech">dev@dadi.tech</a>
        </li>
      </ul>

      
    </div>    

    
      <div class="u-col u-col--1-1">
        <div class="c-combo">
  <label class="c-combo__item c-combo__item--expand c-text-field-container">
    <span class="c-text-field__icon fa fa-search"></span>
    <input class="c-text-field" type="text" placeholder="Search our help centre…" />
  </label>
  <button class="c-combo__item c-button c-button--blue" type="submit">Search</button>
</div>
      </div>
    
  </div>
</header>

	  <h2 id="views">Views</h2>

<h3 id="overview">Overview</h3>

<p>DADI Web.</p>

<ul>
  <li><a href="#data">Data</a></li>
  <li><a href="#dust">Dust</a></li>
  <li><a href="#page-templates">Page Templates</a></li>
  <li><a href="#partial-templates">Partial Templates</a></li>
  <li><a href="#layouts">Master Pages/Layouts</a></li>
  <li><a href="#helpers">Helpers</a></li>
  <li><a href="#filters">Filters</a></li>
</ul>

<p>A <code class="highlighter-rouge">page</code> on your website consists of two files within your application’s file structure: a Page Specification and a Template.</p>

<p>Template files are stored in the same folder as the JSON page specifications and have a <code class="highlighter-rouge">.dust</code> extension. The default folder for pages is <code class="highlighter-rouge">app/pages</code>, although this is configurable using the main application configuration (see <a href="https://github.com/dadi/web/blob/docs/docs/configuration_full.md">Configuration</a>).</p>

<blockquote>
  <p><strong>Note:</strong> Unless the page specification contains an explicit <code class="highlighter-rouge">template</code> property, the template name should match the page specification name.</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>my-web/
  app/
    datasources/      
    events/           
    pages/            # page specifications, layouts and templates        
      layout.dust     # a layout file
      people.dust     # page template file
      people.json     # page specification file
    partials/         # partial/include templates
      header.dust     # partial template file
</code></pre>
</div>

<h4 id="data">Data</h4>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"films"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"debug"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"www.example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nt">"pathname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/films"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"films"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4b80c5bf-cd48-41e5-9e57-29a6dcafab1c"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dallas Buyers Club"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"director"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jean-Marc Vallée"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2h 10min"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"score"</span><span class="p">:</span><span class="w"> </span><span class="s2">"87%"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3ff5b730-3544-4d77-9213-93ea87ef5acf"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Interstellar"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"director"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Christopher Nolan"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2h 40min"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"score"</span><span class="p">:</span><span class="w"> </span><span class="s2">"87%"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="global-config">Global Config</h5>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"films"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"www.example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"global"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"mediaBaseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://media.example.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"films"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="dust">Dust</h4>

<p>Dust is a Javascript templating engine.</p>

<ul>
  <li>http://www.dustjs.com/</li>
  <li>http://akdubya.github.io/dustjs/</li>
</ul>

<h4 id="page-templates">Page Templates</h4>

<p><strong>An example template: app/pages/films.dust</strong></p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Film Index<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;main</span> <span class="na">class=</span><span class="s">"main"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"grid grid--gutter push-4"</span><span class="nt">&gt;</span>
      {#films}
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col w-7"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;h1&gt;</span>{title}<span class="nt">&lt;/h1&gt;</span>
          {&gt;"partials/details"/}
        <span class="nt">&lt;/div&gt;</span>
      {/films}
      <span class="nt">&lt;/section&gt;</span>
    <span class="nt">&lt;/main&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>

<h4 id="partial-templates">Partial Templates</h4>

<p>Partials are reusable Dust templates that may be referenced from the main page templates. As for the page templates, partials also have access to the data loaded by datasources and events.</p>

<p>In the example below the <code class="highlighter-rouge">details</code> partial is referenced by relative path within the template:</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col w-7"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>{title}<span class="nt">&lt;/h1&gt;</span>
  {&gt;"partials/details"/}
<span class="nt">&lt;/div&gt;</span>
</code></pre>
</div>

<p><strong>An example partial: app/partials/details.dust</strong></p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code> <span class="nt">&lt;dl</span> <span class="na">class=</span><span class="s">"t"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Score<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>{score}<span class="nt">&lt;/dd&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Director<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>{director}<span class="nt">&lt;/dd&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Length<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>{length}<span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
</code></pre>
</div>

<p><strong>An example template: app/pages/films.dust</strong></p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Film Index<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;main</span> <span class="na">class=</span><span class="s">"main"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"grid grid--gutter push-4"</span><span class="nt">&gt;</span>
    {#films}
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col w-7"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h1&gt;</span>{title}<span class="nt">&lt;/h1&gt;</span>
        {&gt;"partials/details"/}
      <span class="nt">&lt;/div&gt;</span>
    {/films}
    <span class="nt">&lt;/section&gt;</span>
  <span class="nt">&lt;/main&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>

<h4 id="layouts">Layouts</h4>

<p>Dust allows you to use “master page” or “layouts” so that only the content varies within the pages templates.</p>

<p>A layout file might contain a static header and footer, for example. These would appear on every page that references the layout, without requiring the same markup in every template. Layout files are stored in the <code class="highlighter-rouge">pages</code> folder.</p>

<p><strong>An example layout: app/pages/layout.dust</strong></p>

<p>This layout defines two blocks, <code class="highlighter-rouge">title</code> and <code class="highlighter-rouge">content</code>. Child pages that reference this layout can supply content to populate these blocks using the syntax shown in the next section.</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>{+title/}<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;nav&gt;</span>
      <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/nav&gt;</span>
    {+content/}
    <span class="nt">&lt;footer&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p&gt;</span><span class="ni">&amp;copy;</span> Copyright 2016. DADI+<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/footer&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>

<p><strong>Example Page: app/pages/films.dust</strong></p>

<p>Content within the <code class="highlighter-rouge"><span class="p">{</span><span class="err">&lt;content</span><span class="p">}{</span><span class="err">/content</span><span class="p">}</span></code> block in the below template will be injected in to the layout where the <code class="highlighter-rouge"><span class="p">{</span><span class="err">+content/</span><span class="p">}</span></code> block is defined.</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code>{&gt;layout/}

{<span class="nt">&lt;title</span><span class="err">}</span>
<span class="na">Film</span> <span class="na">Index</span>
<span class="err">{/</span><span class="na">title</span><span class="err">}</span>

<span class="err">{&lt;</span><span class="na">content</span><span class="err">}</span>
<span class="err">&lt;</span><span class="na">main</span> <span class="na">class=</span><span class="s">"main"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"grid grid--gutter push-4"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"kilo col w-12"</span><span class="nt">&gt;</span>Popular films in the last week<span class="nt">&lt;/a&gt;&lt;/div&gt;&lt;/h1&gt;</span>
    <span class="nt">&lt;ul&gt;&lt;/ul&gt;</span>
  <span class="nt">&lt;/section&gt;</span>
<span class="nt">&lt;/main&gt;</span>
{/content}
</code></pre>
</div>

<h4 id="dust-template-helpers--filters">Dust Template Helpers &amp; Filters</h4>

<p>A number of Dust template helpers are built in to DADI Web. A guide to these can be found <a href="https://github.com/dadi/web/blob/docs/docs/dust_helpers.md">here</a>.</p>

<p>Custom helpers and filters can be added to your application by including them within  Javascript files in the configured <code class="highlighter-rouge">helpers</code> and <code class="highlighter-rouge">filters</code> folders. The default location is <code class="highlighter-rouge">app/utils/helpers</code> and <code class="highlighter-rouge">app/utils/filters</code>.</p>

<p>You can either create one file containing all your helpers and one file containing all your filters or add them to the application as individual files.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>my-web/
  app/
    utils/      
    helpers/          # Dust helpers
      helpers.js      # a file containing all helpers for the application
    filters/          # Dust filters
      wookie.js       # a single filter
      unicorns.js     # a single filter
</code></pre>
</div>

<p>Whether you use one file or many, DADI Web will ensure all your helpers and filters are loaded at application startup.</p>

<h5 id="dust-helpers">Dust Helpers</h5>

<p>The following example helper returns the contents of the block wrapped in an HTML <code class="highlighter-rouge">&lt;pre&gt;</code> tag.</p>

<p><strong>Helper</strong></p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// first get a reference to the `dust` instance</span>
<span class="kd">var</span> <span class="nx">dust</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'dustjs-linkedin'</span><span class="p">);</span>

<span class="cm">/**
 * Return the provided content wrapped in an HTML &lt;pre&gt; tag
 */</span>
<span class="nx">dust</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">code</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">chunk</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">bodies</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">bodies</span><span class="p">.</span><span class="nx">block</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">chunk</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="nx">bodies</span><span class="p">.</span><span class="nx">block</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">chunk</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s1">'&lt;pre&gt;'</span> <span class="o">+</span> <span class="nx">string</span> <span class="o">+</span> <span class="s1">'&lt;/pre&gt;'</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">chunk</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p><strong>Usage within a template</strong></p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Code Helper Example<span class="nt">&lt;/h1&gt;</span>
{@code}
alert('Hello World');
{/code}
</code></pre>
</div>

<p><strong>Rendered output</strong></p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Code Helper Example<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;pre&gt;</span>alert('Hello World');<span class="nt">&lt;/pre&gt;</span>
</code></pre>
</div>

<h5 id="dust-filters">Dust Filters</h5>

<p>The following example filter returns the data with the first instance of “unicorn” replaced with “horse”.</p>

<p><strong>Filter</strong></p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// first get a reference to the `dust` instance</span>
<span class="kd">var</span> <span class="nx">dust</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'dustjs-linkedin'</span><span class="p">);</span>

<span class="cm">/**
 * Return the data with the first instance of "unicorn" replaced with "horse"
 * @param {string} value - the input value to apply the filter to
 * @returns {string}
 */</span>
<span class="nx">dust</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">unicorn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
 <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">'string'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'unicorn'</span><span class="p">,</span> <span class="s1">'horse'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p><strong>Usage within a template</strong></p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Unicorns to Horses<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>{"I love unicorns"|unicorn}<span class="nt">&lt;/p&gt;</span>
</code></pre>
</div>

<p><strong>Rendered output</strong></p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Unicorns to Horses<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>I love horses<span class="nt">&lt;/p&gt;</span>
</code></pre>
</div>


	  <footer class="c-footer">
  <div class="u-cols u-wrapper">
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Client engagement</h3>
      <p class="epsilon"><a href="mailto:makesomething@dadi.tech">makesomething@dadi.tech</a><br>
      +44 (0) 20 7205 2902</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Media enquiries</h3>
      <p class="epsilon"><a href="mailto:press@dadi.tech">press@dadi.tech</a><br>
      +44 (0) 20 7205 2901</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Careers</h3>
      <p class="epsilon"><a href="mailto:joinus@dadi.tech">joinus@dadi.tech</a><br>
      +44 (0) 20 7205 2903</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Everything else</h3>
      <p class="epsilon"><a href="mailto:hi@dadi.tech">hi@dadi.tech</a><br>
      +44 (0) 20 7205 2900<br>
      <a href="http://twitter.com/dadi">@dadi</a></p>
    </div>
  </div>

  <div class="u-wrapper u-padding">
    <img src="/public/assets/img/dadi-full.png" height="24">
  </div>
</footer>

	</body>
</html>