<!DOCTYPE html>
<html>
	<head>
  <meta charset="utf-8">  
  <meta name="author" content="dadi.co">  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Welcome</title>
  <link rel="stylesheet" type="text/css" href="/css/main.css">
</head>

	<body>

	  <header class="c-header c-header--acollapsed">
  <div class="c-header__inner-wrapper u-cols">
    <div class="u-col u-col--1-1 u-col--2-3@medium">
      <a href="/">
        <img class="c-header__logo" src="/public/assets/img/dadi.png" alt="DADI">
      </a>

      <h2 class="c-header__title">Developer support</h2>
      <p class="c-header__subtitle">Tutorials and documentation</p>    
    </div>

    <div class="c-header__top u-col u-col--1-1 u-col--1-3@medium">
      <ul class="c-header__links">
        <li class="c-header__link">
          <a href="http://twitter.com/dadi">@DADI</a>
        </li>
        <li class="c-header__link">
          <a href="mailto:dev@dadi.tech">dev@dadi.tech</a>
        </li>
      </ul>

      
    </div>    

    
      <div class="u-col u-col--1-1">
        <div class="c-combo">
  <label class="c-combo__item c-combo__item--expand c-text-field-container">
    <span class="c-text-field__icon fa fa-search"></span>
    <input class="c-text-field" type="text" placeholder="Search our help centre…" />
  </label>
  <button class="c-combo__item c-button c-button--blue" type="submit">Search</button>
</div>
      </div>
    
  </div>
</header>

	  <h2 id="sessions">Sessions</h2>

<h3 id="overview">Overview</h3>

<p>DADI Web uses the <a href="https://github.com/expressjs/session">express-session</a> library to handle sessions. Visit that project’s homepage for more detailed information regarding session configuration.</p>

<ul>
  <li><a href="#configuration">Configuration</a></li>
  <li><a href="#configuration-properties">Configuration Properties</a></li>
  <li><a href="#using-the-session">Using the session</a></li>
</ul>

<h4 id="configuration">Configuration</h4>

<p><strong>Note:</strong> Sessions are disabled by default. To enable them in your application, add the following to your configuration file:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="s2">"sessions"</span><span class="err">:</span> <span class="p">{</span>
  <span class="s2">"enabled"</span><span class="err">:</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre>
</div>

<p>A full configuration block for sessions contains the following properties:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="s2">"sessions"</span><span class="err">:</span> <span class="p">{</span>
  <span class="s2">"enabled"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"name"</span><span class="err">:</span> <span class="s2">"dadiweb.sid"</span><span class="p">,</span>
  <span class="s2">"secret"</span><span class="err">:</span> <span class="s2">"dadiwebsecretsquirrel"</span><span class="p">,</span>
  <span class="s2">"resave"</span><span class="err">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="s2">"saveUninitialized"</span><span class="err">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="s2">"store"</span><span class="err">:</span> <span class="s2">""</span><span class="p">,</span>
  <span class="s2">"cookie"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"maxAge"</span><span class="err">:</span> <span class="mi">60000</span><span class="p">,</span>
    <span class="s2">"secure"</span><span class="err">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="configuration-properties">Configuration Properties</h4>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>enabled</td>
      <td>If <code class="highlighter-rouge">true</code>, sessions are enabled.</td>
      <td>false</td>
    </tr>
    <tr>
      <td>name</td>
      <td>The session cookie name.</td>
      <td>“dadiweb.sid”</td>
    </tr>
    <tr>
      <td>secret</td>
      <td>The secret used to sign the session ID cookie. This can be either a string for a single secret, or an array of multiple secrets. If an array of secrets is provided, only the first element will be used to sign the session ID cookie, while all the elements will be considered when verifying the signature in requests.</td>
      <td>“dadiwebsecretsquirrel”</td>
    </tr>
    <tr>
      <td>resave</td>
      <td>Forces the session to be saved back to the session store, even if the session was never modified during the request.</td>
      <td>false</td>
    </tr>
    <tr>
      <td>saveUninitialized</td>
      <td>Forces a session that is “uninitialized” to be saved to the store. A session is uninitialized when it is new but not modified. Choosing false is useful for implementing login sessions, reducing server storage usage, or complying with laws that require permission before setting a cookie. Choosing false will also help with race conditions where a client makes multiple parallel requests without a session.</td>
      <td>false</td>
    </tr>
    <tr>
      <td>store</td>
      <td>The session store instance, defaults to a new MemoryStore instance.</td>
      <td>The default is an empty string, which uses a new MemoryStore instance. To use MongoDB as the session store, specify a MongoDB connection string such as <code class="highlighter-rouge">"mongodb://host:port/databaseName"</code> or <code class="highlighter-rouge">"mongodb://username:password@host:port/databaseName"</code> if your database requires authentication. To use Redis, specify a Redis server’s address and port number: <code class="highlighter-rouge">"redis://127.0.0.1:6379"</code>.</td>
    </tr>
    <tr>
      <td>cookie</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>cookie.maxAge</td>
      <td>Set the cookie’s expiration as an interval of seconds in the future, relative to the time the browser received the cookie. <code class="highlighter-rouge">null</code> means no ‘expires’ parameter is set so the cookie becomes a browser-session cookie. When the user closes the browser the cookie (and session) will be removed.</td>
      <td>60000</td>
    </tr>
    <tr>
      <td>cookie.secure</td>
      <td>HTTPS is necessary for secure cookies. If <code class="highlighter-rouge">secure</code> is <code class="highlighter-rouge">true</code> and you access your site over HTTP, the cookie will not be set.</td>
      <td>false</td>
    </tr>
  </tbody>
</table>

<h4 id="using-the-session">Using the session</h4>

<p>Session data can easily be accessed from an <a href="https://github.com/dadi/web/blob/docs/docs/events.md">event</a> or custom <a href="https://github.com/dadi/web/blob/docs/docs/middleware.md">middleware</a>.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Event</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>

 <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">someProperty</span> <span class="o">=</span> <span class="s2">"some value"</span><span class="p">;</span>
   <span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// session saved</span>
   <span class="p">})</span>

   <span class="nx">data</span><span class="p">.</span><span class="nx">session_id</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
 <span class="p">}</span>

 <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>


	  <footer class="c-footer">
  <div class="u-cols u-wrapper">
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Client engagement</h3>
      <p class="epsilon"><a href="mailto:makesomething@dadi.tech">makesomething@dadi.tech</a><br>
      +44 (0) 20 7205 2902</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Media enquiries</h3>
      <p class="epsilon"><a href="mailto:press@dadi.tech">press@dadi.tech</a><br>
      +44 (0) 20 7205 2901</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Careers</h3>
      <p class="epsilon"><a href="mailto:joinus@dadi.tech">joinus@dadi.tech</a><br>
      +44 (0) 20 7205 2903</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Everything else</h3>
      <p class="epsilon"><a href="mailto:hi@dadi.tech">hi@dadi.tech</a><br>
      +44 (0) 20 7205 2900<br>
      <a href="http://twitter.com/dadi">@dadi</a></p>
    </div>
  </div>

  <div class="u-wrapper u-padding">
    <img src="/public/assets/img/dadi-full.png" height="24">
  </div>
</footer>

	</body>
</html>