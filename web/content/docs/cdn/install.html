<!DOCTYPE html>
<html>
	<head>
  <meta charset="utf-8">  
  <meta name="author" content="dadi.co">  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Welcome</title>
  <link rel="stylesheet" type="text/css" href="/css/main.css">
</head>

	<body>

	  <header class="c-header c-header--acollapsed">
  <div class="c-header__inner-wrapper u-cols">
    <div class="u-col u-col--1-1 u-col--2-3@medium">
      <a href="/">
        <img class="c-header__logo" src="/public/assets/img/dadi.png" alt="DADI">
      </a>

      <h2 class="c-header__title">Developer support</h2>
      <p class="c-header__subtitle">Tutorials and documentation</p>    
    </div>

    <div class="c-header__top u-col u-col--1-1 u-col--1-3@medium">
      <ul class="c-header__links">
        <li class="c-header__link">
          <a href="http://twitter.com/dadi">@DADI</a>
        </li>
        <li class="c-header__link">
          <a href="mailto:dev@dadi.tech">dev@dadi.tech</a>
        </li>
      </ul>

      
    </div>    

    
      <div class="u-col u-col--1-1">
        <div class="c-combo">
  <label class="c-combo__item c-combo__item--expand c-text-field-container">
    <span class="c-text-field__icon fa fa-search"></span>
    <input class="c-text-field" type="text" placeholder="Search our help centre…" />
  </label>
  <button class="c-combo__item c-button c-button--blue" type="submit">Search</button>
</div>
      </div>
    
  </div>
</header>

	  <h2 id="installation-ubuntu">Installation: Ubuntu</h2>

<h3 id="overview">Overview</h3>

<p>This guide provides a simple step-by-step guide to installing CDN on Ubuntu <a href="http://releases.ubuntu.com/14.04.1/">14.04.1 LTS</a>.<br />
It assumes you’ll be running a single server using utilising local caching. For Redis setup instruction<br />
see <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-redis">https://www.digitalocean.com/community/tutorials/how-to-install-and-use-redis</a>.</p>

<h3 id="installing-dadi-cdn">Installing DADI CDN</h3>

<h4 id="prerequisites">Prerequisites</h4>

<p>The DADI platform follows the Node LTS (Long Term Support) release schedule, and as such<br />
the version of Node required to run DADI CDN is coupled to the version of Node<br />
currently in Active LTS. See the <a href="https://github.com/nodejs/LTS">LTS schedule</a> for<br />
further information.</p>

<h4 id="install-nodejs-and-npm">Install Node.js and NPM</h4>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>curl -sL https://deb.nodesource.com/setup_4.x | sudo -E bash -
sudo apt-get install -y nodejs
sudo apt-get install -y build-essential
sudo npm install npm -g
</code></pre>
</div>

<h4 id="upgrade-gcc-compiler">Upgrade GCC++ Compiler</h4>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>sudo add-apt-repository ppa:ubuntu-toolchain-r/test
sudo apt-get update -y
sudo apt-get install gcc-4.9 g++-4.9
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 60 --slave /usr/bin/g++ g++ /usr/bin/g++-4.9
</code></pre>
</div>

<h4 id="install-dependencies">Install dependencies</h4>

<h5 id="git">Git</h5>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>sudo apt-get install git
</code></pre>
</div>

<h5 id="image-libraries">Image Libraries</h5>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>sudo apt-get install libcairo2-dev libjpeg-dev libgif-dev
</code></pre>
</div>

<h5 id="sqwish-css-compressor">Sqwish CSS Compressor</h5>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>sudo npm install -g sqwish
</code></pre>
</div>

<h4 id="install-dadi-cdn">Install DADI CDN</h4>

<h5 id="installing-from-npm">Installing from NPM</h5>

<ol>
  <li><code class="highlighter-rouge">mkdir my-cdn-app</code></li>
  <li><code class="highlighter-rouge">cd my-cdn-app</code></li>
  <li><code class="highlighter-rouge">npm init</code> - follow the prompts, accepting the defaults is usually enough</li>
  <li><code class="highlighter-rouge">npm install --save @dadi/cdn</code></li>
  <li><code class="highlighter-rouge">touch main.js</code></li>
  <li>add the following code to <code class="highlighter-rouge">main.js</code>
    <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'@dadi/cdn'</span><span class="p">)</span>
</code></pre>
    </div>
  </li>
  <li>add the following to package.json
    <div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="s2">"scripts"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NODE_ENV=production node ./main.js"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
    </div>
  </li>
</ol>

<h4 id="starting-the-server">Starting the server</h4>

<blockquote>
  <p><strong>Note:</strong> CDN creates log and cache directories at startup using settings in the current environment’s configuration file.</p>
</blockquote>

<p><code class="highlighter-rouge">[sudo] npm start</code></p>

<h4 id="running-dadi-cdn-as-a-service">Running DADI CDN as a service</h4>

<p>To run DADI CDN as a service, install <a href="https://github.com/nodejitsu/forever">Forever</a> and <a href="https://github.com/zapty/forever-service">Forever-service</a>:</p>

<p><code class="highlighter-rouge">sudo npm install -g forever forever-service</code></p>

<p>Install DADI CDN as a service and ensure it loads on boot:</p>

<p><code class="highlighter-rouge">sudo forever-service install -s main.js -e NODE_ENV=production cdn --start</code></p>

<p><em>Note the environment variable - <code class="highlighter-rouge">NODE_ENV=production</code> - must be set to target the required config version.</em></p>

<p>You can then interact with DADI CDN as a service using the following command:</p>

<ul>
  <li>Start: <code class="highlighter-rouge">[sudo] start cdn</code></li>
  <li>Stop: <code class="highlighter-rouge">[sudo] stop cdn</code></li>
  <li>Status: <code class="highlighter-rouge">[sudo] status cdn</code></li>
  <li>Restart <code class="highlighter-rouge">[sudo] restart cdn</code></li>
</ul>


	  <footer class="c-footer">
  <div class="u-cols u-wrapper">
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Client engagement</h3>
      <p class="epsilon"><a href="mailto:makesomething@dadi.tech">makesomething@dadi.tech</a><br>
      +44 (0) 20 7205 2902</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Media enquiries</h3>
      <p class="epsilon"><a href="mailto:press@dadi.tech">press@dadi.tech</a><br>
      +44 (0) 20 7205 2901</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Careers</h3>
      <p class="epsilon"><a href="mailto:joinus@dadi.tech">joinus@dadi.tech</a><br>
      +44 (0) 20 7205 2903</p>
    </div>
    <div class="u-col u-col--1-2 u-col--1-4@medium u-padding">
      <h3 class="c-footer__title">Everything else</h3>
      <p class="epsilon"><a href="mailto:hi@dadi.tech">hi@dadi.tech</a><br>
      +44 (0) 20 7205 2900<br>
      <a href="http://twitter.com/dadi">@dadi</a></p>
    </div>
  </div>

  <div class="u-wrapper u-padding">
    <img src="/public/assets/img/dadi-full.png" height="24">
  </div>
</footer>

	</body>
</html>